<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header" data-aos="fade-up">
        <h4 class="card-title"> Hashes Table</h4>
      </div>
      <div class="card-body">
        <div class="table-responsive" data-aos="zoom-in">
          <mat-form-field>
            <mat-label><i class="nc-icon nc-zoom-split"></i></mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. HashId,Address" #input>
          </mat-form-field>
          <ngx-skeleton-loader count="20"  *ngIf="(!hashes) || (hashes && hashes.length == 0)"></ngx-skeleton-loader>
          <table class="table" mat-table [dataSource]="dataSource" matSort multiTemplateDataRows
            class="mat-elevation-z8" [hidden]="!(hashes && hashes.length > 0)">
            <ng-container matColumnDef="_id" >
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-primary"> ID </th>
              <td mat-cell *matCellDef="let element" matTooltip="{{element._id}}" > {{element._id}} </td>
            </ng-container>
            <ng-container matColumnDef="hashId">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-primary"> HashId </th>
              <td mat-cell *matCellDef="let element" matTooltip="{{element.hashId}}"> {{element.hashId}} </td>
            </ng-container>

            <!-- Address Column -->
            <ng-container matColumnDef="address">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-primary"> Address </th>
              <td mat-cell *matCellDef="let element" matTooltip="{{element.address}}"> {{element.address}} </td>
            </ng-container>
            <!-- CreatedAt Column -->
            <ng-container matColumnDef="createdAt">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-primary"> Joined On</th>
              <td mat-cell *matCellDef="let element"> {{element.createdAt | date:'short'}} </td>
            </ng-container>
            <!-- N Games Column -->
            <ng-container matColumnDef="games">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-primary"> N Games </th>
              <td mat-cell *matCellDef="let element" matTooltip="{{element.games}}"> {{element.games}} </td>
            </ng-container>

            <!-- Total Diposit Column -->
            <ng-container matColumnDef="deposits">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-primary"> Deposits</th>
              <td mat-cell *matCellDef="let element" matTooltip="{{element.deposits}}"> {{element.deposits}} </td>
            </ng-container>
            <!-- Secured Hash Column -->
            <ng-container matColumnDef="passwordChange">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-primary"> Hash Secure</th>
              <td mat-cell *matCellDef="let element">

                <mat-icon *ngIf="element.passwordChange == false">lock_open</mat-icon>
                <mat-icon *ngIf="element.passwordChange == true">lock</mat-icon>

              </td>
            </ng-container>
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-primary"> Status</th>
              <td mat-cell *matCellDef="let element">

                <mat-icon *ngIf="(element.status && element.status == 'active') || (!element.status)">lock_open</mat-icon>
                <mat-icon *ngIf="(element.status && element.status == 'blocked')">lock</mat-icon>

              </td>
            </ng-container>
            <ng-container matColumnDef="expandedDetail" *ngIf="hashes && hashes.length > 0">
              <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
                <div class="element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                  <div class="button-row">
                    <div class="flex-container">
                      <div class="button-container">
                        <button mat-mini-fab color="accent" aria-label="Example icon button with a plus one icon" (click)='goHashInfo(element.hashId)'>
                          <mat-icon>open_in_new</mat-icon>
                        </button>
                      </div>
                      <div class="button-container">
                        <button mat-mini-fab color="warn" aria-label="Example icon button with a filter list icon" (click)="buildConfirmBox(element)">
                          <mat-icon *ngIf="(element.status && element.status == 'active') || (!element.status)">block</mat-icon>
                          <mat-icon *ngIf="(element.status && element.status == 'blocked')">check_circle_outline</mat-icon>
                        </button>
                      </div>

                    </div>
                  </div>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns" ></tr>
            <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="element-row"
              [class.expanded-row]="expandedElement === element"
              (click)="expandedElement = expandedElement === element ? null : element"></tr>
            <div *ngIf="hashes && hashes.length > 0">
              <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>

            </div>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
            </tr>
          </table>
          <mat-paginator [pageSizeOptions]="[20, 50, 100]" showFirstLastButtons></mat-paginator>
        </div>
      </div>
    </div>
  </div>
</div>
